var data,archiveDiv=document.getElementsByClassName("archive-info")[0],selectEl=document.getElementsByClassName("select")[0],optionsEl=document.getElementsByClassName("options")[0],baseUrl="https://api.spacexdata.com/v3/";function getArchive(e){if(archiveDiv.innerHTML='<img id="loading-img" src="media/loading.svg">',window.XMLHttpRequest)var t=new XMLHttpRequest;else t=new ActiveXObject("Microsoft.XMLHTTP");var a=baseUrl+e;t.onreadystatechange=function(){4==this.readyState&&(200==this.status?(data=JSON.parse(t.responseText),"history"==e?implementHistory():"rockets"==e?implementRockets():"missions"==e?implementMissions():"launches"==e&&implementLaunches(),selectEl.getElementsByTagName("p")[0].innerHTML=e.charAt(0).toUpperCase()+e.slice(1)+'<img src="media/arrow-right-16.svg">'):console.log("Fil ikke funnet 404"))},t.open("GET",a,!0),t.send()}function implementHistory(){for(var e in archiveDiv.innerHTML="",data){var t=document.createElement("div");t.setAttribute("class","archive-row"),makeElement("h1",data[e].title,t),makeElement("p",data[e].details,t),makeElement("a","Article",t,"href",data[e].links.article),archiveDiv.appendChild(t)}}function implementRockets(){for(var e in archiveDiv.innerHTML="",data){var t=document.createElement("div");t.setAttribute("class","archive-row"),makeElement("h1",data[e].rocket_name,t),makeElement("p","<b>Details: </b>"+data[e].description,t),makeElement("p","<b>Country: </b>"+data[e].country,t),makeElement("p","<b>First flight: </b>"+data[e].first_flight,t),makeElement("a",data[e].rocket_name+" Wikipedia page",t,"href",data[e].wikipedia),makeImgElement(null,t,data[e].flickr_images[0],data[e].rocket_name),archiveDiv.appendChild(t)}}function implementMissions(){for(var e in archiveDiv.innerHTML="",data){var t=document.createElement("div");t.setAttribute("class","archive-row"),makeElement("h1",data[e].mission_name,t),makeElement("p","<b>Details: </b>"+data[e].description,t),makeElement("a",data[e].mission_name+" wikipedia article",t,"href",data[e].wikipedia),archiveDiv.appendChild(t)}}function implementLaunches(){for(var e in archiveDiv.innerHTML="",data){var t=document.createElement("div");t.setAttribute("class","archive-row"),makeElement("h1",data[e].mission_name,t),null!==data[e].links.mission_patch_small&&makeImgElement(null,t,data[e].links.mission_patch_small,data[e].mission_name+" mission patch"),makeElement("p","<b>Rocket: </b>"+data[e].rocket.rocket_name,t),makeElement("p","<b>Launch site: </b>"+data[e].launch_site.site_name_long,t),null!==data[e].details?makeElement("p","<b>Details: </b>"+data[e].details,t):makeElement("p","<b>Details</b>: No details available",t),makeElement("p","<b>Launch year: </b>"+data[e].launch_year,t),null!==data[e].links.article_link&&makeElement("a",data[e].mission_name+" launch article",t,"href",data[e].links.article_link),archiveDiv.appendChild(t)}}function makeElement(e,t,a,i,n){var l=document.createElement(e);void 0!==i&&void 0!==n&&l.setAttribute(i,n),l.innerHTML=t,a.appendChild(l)}function makeImgElement(e,t,a,i){var n=document.createElement("img");n.setAttribute("src",a),n.setAttribute("alt",i),n.innerHTML=e,t.appendChild(n)}getArchive("launches"),selectEl.onfocus=function(){optionsEl.style.display="block"},selectEl.onblur=function(){optionsEl.style.display="none"},optionsEl.addEventListener("click",function(){optionsEl.style.display="none",selectEl.blur()}),window.onresize=function(){optionsEl.style.display="none",console.log("fjern options")};